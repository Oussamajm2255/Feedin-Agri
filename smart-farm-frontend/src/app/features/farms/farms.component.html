<div class="farms-container" [attr.dir]="languageService.getCurrentLanguage().direction">
  <div class="farms-header">
    <h1>{{ 'farms.farmManagement' | translate }}</h1>
    <p>{{ 'farms.manageFarms' | translate }}</p>
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="addFarm()">
        <mat-icon>add</mat-icon>
        {{ 'farms.addFarm' | translate }}
      </button>
      <button mat-icon-button (click)="refreshFarms()" [disabled]="isLoading"
        [matTooltip]="'common.refresh' | translate">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>

  <div class="farms-content" *ngIf="!isLoading; else loadingTemplate">
    <div class="farms-grid" *ngIf="farms.length > 0; else noFarms">
      <mat-card *ngFor="let farm of farms" class="farm-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>home</mat-icon>
            {{ farm.name }}
          </mat-card-title>
          <mat-card-subtitle>{{ farm.location || ('farms.noLocationSpecified' | translate) }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <div class="farm-stats">
            <div class="farm-stat">
              <mat-icon>devices</mat-icon>
              <div class="stat-info">
                <span class="stat-number">{{ farm.devices?.length || 0 }}</span>
                <span class="stat-label">{{ 'navigation.devices' | translate }}</span>
              </div>
            </div>

            <div class="farm-stat">
              <mat-icon>sensors</mat-icon>
              <div class="stat-info">
                <span class="stat-number">{{ farm.sensors?.length || 0 }}</span>
                <span class="stat-label">{{ 'navigation.sensors' | translate }}</span>
              </div>
            </div>
          </div>

          <div class="farm-actions">
            <button mat-button color="primary" (click)="editFarm(farm)">
              <mat-icon>edit</mat-icon>
              {{ 'common.edit' | translate }}
            </button>
            <button mat-button color="warn" (click)="deleteFarm(farm)">
              <mat-icon>delete</mat-icon>
              {{ 'common.delete' | translate }}
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <ng-template #noFarms>
      <div class="no-data">
        <mat-icon>home</mat-icon>
        <h3>{{ 'farms.noFarmsFound' | translate }}</h3>
        <p>{{ 'farms.getStarted' | translate }}</p>
        <button mat-raised-button color="primary" (click)="addFarm()">
          <mat-icon>add</mat-icon>
          {{ 'farms.createFirstFarm' | translate }}
        </button>
      </div>
    </ng-template>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-container">
      <mat-spinner diameter="50"></mat-spinner>
      <p>{{ 'farms.loadingFarms' | translate }}</p>
    </div>
  </ng-template>
</div>