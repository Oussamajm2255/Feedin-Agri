<!-- =============================================
     ONBOARDING STATUS PAGE â€” PENDING APPROVAL
     
     CRITICAL PAGE: Prevents user anxiety.
     No dashboard, no charts, no fake data.
     Earth tones, calm spacing, trust-building.
     ============================================= -->

<div class="pending-page">

    <!-- 1. MINIMAL HEADER -->
    <header class="pending-header" role="banner">
        <div class="header-inner">
            <div class="header-left">
                <div class="header-brand">
                    <img src="assets/images/logos/Feedin_pnglogo.png" alt="Feedin Logo" class="brand-logo" />
                </div>
                <div class="status-badge">
                    <span class="badge-dot"></span>
                    <span class="badge-text">{{ 'pending.badge' | translate }}</span>
                </div>
            </div>

            <!-- RIGHT: Actions -->
            <div class="header-actions">
                <!-- Theme Toggle -->
                <button class="action-btn" (click)="toggleTheme()"
                    [matTooltip]="(currentTheme | async) === 'light' ? 'Dark Mode' : 'Light Mode'"
                    matTooltipPosition="below" type="button">
                    <svg *ngIf="(currentTheme | async) === 'light'" class="action-icon" fill="none" viewBox="0 0 24 24"
                        stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
                    </svg>
                    <svg *ngIf="(currentTheme | async) === 'dark'" class="action-icon" fill="none" viewBox="0 0 24 24"
                        stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                    </svg>
                </button>

                <!-- Language Switcher -->
                <div class="language-switcher">
                    <app-custom-dropdown [title]="'language.select' | translate" [headerIcon]="'language'"
                        [items]="languageDropdownItems" [selectedItemId]="getSelectedLanguageId()"
                        (itemSelected)="onLanguageItemSelected($event)">
                        <div slot="trigger" class="action-btn" role="button" [matTooltip]="'Language'"
                            matTooltipPosition="below">
                            <svg class="action-icon" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802" />
                            </svg>
                        </div>
                    </app-custom-dropdown>
                </div>

                <!-- User Profile Avatar -->
                <button class="user-avatar" [matMenuTriggerFor]="userMenu" matTooltipPosition="below" type="button">
                    <div class="avatar-circle">
                        <span class="avatar-initials">{{ getInitials() }}</span>
                    </div>
                </button>
            </div>
        </div>
    </header>

    <!-- 2. MAIN CONTENT -->
    <main class="pending-main">
        <div class="pending-card">

            <!-- Title -->
            <h1 class="pending-title">{{ 'pending.title' | translate }}</h1>
            <p class="pending-subtitle">
                {{ 'pending.subtitle' | translate }}
            </p>

            <!-- 3. VISUAL STATUS INDICATOR â€” Soft animated horizontal progress line -->
            <div class="status-progress-line">
                <div class="progress-track">
                    <div class="progress-glow"></div>
                </div>
            </div>

            <!-- 4. STATUS STEPS (Icons, not progress bars) -->
            <div class="status-steps">
                <div class="step completed">
                    <div class="step-icon-wrapper">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                    </div>
                    <span class="step-label">{{ 'pending.status.submitted' | translate }}</span>
                </div>

                <div class="step-connector"></div>

                <div class="step in-progress">
                    <div class="step-icon-wrapper">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </div>
                    <span class="step-label">{{ 'pending.status.verification' | translate }}</span>
                </div>

                <div class="step-connector"></div>

                <div class="step upcoming">
                    <div class="step-icon-wrapper">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <span class="step-label">{{ 'pending.status.activation' | translate }}</span>
                </div>
            </div>

            <!-- 5. WHAT HAPPENS NEXT -->
            <div class="next-steps-block">
                <h2 class="next-steps-title">{{ 'pending.nextSteps.title' | translate }}</h2>
                <p class="next-steps-text" [innerHTML]="'pending.nextSteps.description' | translate"></p>
            </div>

            <!-- 6. OPTIONAL ACTIONS (Low Emphasis) -->
            <div class="pending-actions">
                <a href="mailto:support@feedin.io" class="action-link">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    {{ 'pending.actions.support' | translate }}
                </a>
                <button class="action-link" (click)="openFeaturesModal()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    {{ 'pending.actions.features' | translate }}
                </button>
            </div>

            <!-- Logout Link has been moved to user menu dropdown -->
        </div>
    </main>

    <!-- FEATURES MODAL -->
    <div class="features-modal-overlay" *ngIf="showFeaturesModal()" (click)="closeFeaturesModal()">
        <div class="features-modal" (click)="$event.stopPropagation()">
            <button class="modal-close" (click)="closeFeaturesModal()" aria-label="Close">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <h2 class="modal-title">{{ 'pending.features.title' | translate }}</h2>

            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                            <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                            <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                        </svg>
                    </div>
                    <h3>{{ 'pending.features.items.dashboard.title' | translate }}</h3>
                    <p>{{ 'pending.features.items.dashboard.desc' | translate }}</p>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                        </svg>
                    </div>
                    <h3>{{ 'pending.features.items.sensors.title' | translate }}</h3>
                    <p>{{ 'pending.features.items.sensors.desc' | translate }}</p>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path
                                d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z" />
                            <path d="M2 21c0-3.18 2.2-6 3-9" />
                        </svg>
                    </div>
                    <h3>{{ 'pending.features.items.crops.title' | translate }}</h3>
                    <p>{{ 'pending.features.items.crops.desc' | translate }}</p>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" width="28" height="28" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>
                        </svg>
                    </div>
                    <h3>{{ 'pending.features.items.weather.title' | translate }}</h3>
                    <p>{{ 'pending.features.items.weather.desc' | translate }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- User Menu Dropdown -->
<mat-menu #userMenu="matMenu" class="user-menu-dropdown">
    <div class="user-menu-header" mat-menu-item disabled>
        <div class="user-menu-avatar">
            <span class="avatar-initials-large">{{ getInitials() }}</span>
            <div class="avatar-status online"></div>
        </div>
        <div class="user-info">
            <div class="user-name">{{ (user()?.first_name || 'User') + ' ' + (user()?.last_name || '') }}</div>
            <div class="user-email">{{ user()?.email || 'user@example.com' }}</div>
        </div>
    </div>
    <mat-divider class="menu-divider"></mat-divider>
    <button mat-menu-item (click)="logout()" class="menu-item-compact logout-item">
        <div class="item-icon-wrapper logout-icon">
            <svg class="menu-icon text-danger" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
            </svg>
        </div>
        <span class="menu-item-label text-danger">{{ 'auth.logout' | translate }}</span>
    </button>
</mat-menu>